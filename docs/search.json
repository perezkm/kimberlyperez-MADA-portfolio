[
  {
    "objectID": "fluanalysis/code/modeleval.html",
    "href": "fluanalysis/code/modeleval.html",
    "title": "Flu Analysis Data: Model Evaluation",
    "section": "",
    "text": "Let’s Begin with Model Evaluation"
  },
  {
    "objectID": "fluanalysis/code/modeleval.html#but-first-lets-load-some-packages",
    "href": "fluanalysis/code/modeleval.html#but-first-lets-load-some-packages",
    "title": "Flu Analysis Data: Model Evaluation",
    "section": "But first, let’s load some packages…",
    "text": "But first, let’s load some packages…\n\nlibrary(dplyr) #Data wrangling \n\nWarning: package 'dplyr' was built under R version 4.2.2\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\nlibrary(tidyr) #Helps with data wrangling\n\nWarning: package 'tidyr' was built under R version 4.2.2\n\nlibrary(here) #Setting paths\n\nWarning: package 'here' was built under R version 4.2.2\n\n\nhere() starts at C:/Users/Sara/Documents/Documents/Current Classes/MADA/kimberlyperez-MADA-portfolio\n\nlibrary(tidyverse) #Data transformation\n\n── Attaching packages\n───────────────────────────────────────\ntidyverse 1.3.2 ──\n\n\n✔ ggplot2 3.4.0     ✔ purrr   1.0.1\n✔ tibble  3.1.8     ✔ stringr 1.5.0\n✔ readr   2.1.3     ✔ forcats 0.5.2\n\n\nWarning: package 'ggplot2' was built under R version 4.2.2\n\n\nWarning: package 'readr' was built under R version 4.2.2\n\n\nWarning: package 'purrr' was built under R version 4.2.2\n\n\nWarning: package 'stringr' was built under R version 4.2.2\n\n\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n\nlibrary(ggplot2) #Graphs/Visualization\nlibrary(tidymodels) #For modeling\n\nWarning: package 'tidymodels' was built under R version 4.2.2\n\n\n── Attaching packages ────────────────────────────────────── tidymodels 1.0.0 ──\n✔ broom        1.0.2     ✔ rsample      1.1.1\n✔ dials        1.1.0     ✔ tune         1.0.1\n✔ infer        1.0.4     ✔ workflows    1.1.2\n✔ modeldata    1.0.1     ✔ workflowsets 1.0.0\n✔ parsnip      1.0.3     ✔ yardstick    1.1.0\n✔ recipes      1.0.4     \n\n\nWarning: package 'broom' was built under R version 4.2.2\n\n\nWarning: package 'dials' was built under R version 4.2.2\n\n\nWarning: package 'scales' was built under R version 4.2.2\n\n\nWarning: package 'infer' was built under R version 4.2.2\n\n\nWarning: package 'modeldata' was built under R version 4.2.2\n\n\nWarning: package 'parsnip' was built under R version 4.2.2\n\n\nWarning: package 'recipes' was built under R version 4.2.2\n\n\nWarning: package 'rsample' was built under R version 4.2.2\n\n\nWarning: package 'tune' was built under R version 4.2.2\n\n\nWarning: package 'workflows' was built under R version 4.2.2\n\n\nWarning: package 'workflowsets' was built under R version 4.2.2\n\n\nWarning: package 'yardstick' was built under R version 4.2.2\n\n\n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ scales::discard() masks purrr::discard()\n✖ dplyr::filter()   masks stats::filter()\n✖ recipes::fixed()  masks stringr::fixed()\n✖ dplyr::lag()      masks stats::lag()\n✖ yardstick::spec() masks readr::spec()\n✖ recipes::step()   masks stats::step()\n• Search for functions across packages at https://www.tidymodels.org/find/"
  },
  {
    "objectID": "fluanalysis/code/modeleval.html#create-recipe-with-all-symptoms",
    "href": "fluanalysis/code/modeleval.html#create-recipe-with-all-symptoms",
    "title": "Flu Analysis Data: Model Evaluation",
    "section": "Create recipe with all symptoms",
    "text": "Create recipe with all symptoms\nFollowing the same steps as above:\n\n#create recipe using all symptoms as predictors of body temp\nflu_recBTAS <- \n  recipe(BodyTemp ~ ., data = train_data_flu)\n\n#set model\nln_mod <- linear_reg() %>% \n  set_engine(\"glm\")\n\n#create work flow\nflu_wflowBTAS <-\n  workflow() %>% \n  add_model(ln_mod) %>% \n  add_recipe(flu_recBTAS)\n\n#create fitted model\nflu_fitBTAS <-\n  flu_wflowBTAS %>% \n  fit(data = train_data_flu)\n\n#check fitted model\nflu_fitBTAS %>% \n  extract_fit_parsnip() %>% \n  tidy()\n\n# A tibble: 38 × 5\n   term                 estimate std.error statistic p.value\n   <chr>                   <dbl>     <dbl>     <dbl>   <dbl>\n 1 (Intercept)           97.8        0.347   282.    0      \n 2 SwollenLymphNodesYes  -0.124      0.105    -1.17  0.241  \n 3 ChestCongestionYes     0.0731     0.112     0.655 0.513  \n 4 ChillsSweatsYes        0.140      0.148     0.949 0.343  \n 5 NasalCongestionYes    -0.183      0.131    -1.39  0.164  \n 6 CoughYNYes             0.353      0.268     1.31  0.189  \n 7 SneezeYes             -0.297      0.110    -2.70  0.00706\n 8 FatigueYes             0.360      0.185     1.94  0.0528 \n 9 SubjectiveFeverYes     0.361      0.116     3.11  0.00196\n10 HeadacheYes            0.0332     0.142     0.233 0.816  \n# … with 28 more rows\n\n\nHere, we can see the fitted model predicts Body Temperature from all symptoms with most predictors not being statistically significant. Estimates cannot be directly compared without standardizing the variables."
  },
  {
    "objectID": "fluanalysis/code/modeleval.html#predictions-from-trained-model",
    "href": "fluanalysis/code/modeleval.html#predictions-from-trained-model",
    "title": "Flu Analysis Data: Model Evaluation",
    "section": "Predictions from trained model",
    "text": "Predictions from trained model\nWe can also make predictions using the flu_fitBTAS model and the test_data_flu.\n\n#create predictions\nflu_augBTAS <- augment(flu_fitBTAS, test_data_flu)\n\nWarning in predict.lm(object, newdata, se.fit, scale = 1, type = if (type == :\nprediction from a rank-deficient fit may be misleading\n\n#check RMSE as metric for model performance\nflu_augBTAS %>% \n  rmse(truth = BodyTemp, estimate = .pred)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 rmse    standard        1.23\n\n\nThe root mean square error has an estimate of 1.230, indicating this would not be a good model for the data.\nWe can also use the train_data_flu data to make predictions.\n\n#predict from training data\nflu_augRN2 <- augment(flu_fitBTAS, train_data_flu)\n\nWarning in predict.lm(object, newdata, se.fit, scale = 1, type = if (type == :\nprediction from a rank-deficient fit may be misleading\n\n#generate RMSE for model performance\nflu_augRN2 %>% \n  rmse(truth = BodyTemp, estimate = .pred)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 rmse    standard        1.08\n\n\nThe RMSE is lower for the train data, but still not an ideal value."
  },
  {
    "objectID": "fluanalysis/code/modeleval.html#create-recipe-with-runny-nose",
    "href": "fluanalysis/code/modeleval.html#create-recipe-with-runny-nose",
    "title": "Flu Analysis Data: Model Evaluation",
    "section": "Create recipe with Runny Nose",
    "text": "Create recipe with Runny Nose\nFollow the same steps with RunnyNose as the predictor.\n\n#create recipe using RunnyNose as predictor of body temp\nflu_recBTRN <- \n  recipe(BodyTemp ~ RunnyNose, data = train_data_flu)\n\n#set model\nln_mod <- linear_reg() %>% \n  set_engine(\"glm\")\n\n#create work flow\nflu_wflowBTRN <-\n  workflow() %>% \n  add_model(ln_mod) %>% \n  add_recipe(flu_recBTRN)\n\n#create fitted model\nflu_fitBTRN <-\n  flu_wflowBTRN %>% \n  fit(data = train_data_flu)\n\n#check fitted model\nflu_fitBTRN %>% \n  extract_fit_parsnip() %>% \n  tidy()\n\n# A tibble: 2 × 5\n  term         estimate std.error statistic p.value\n  <chr>           <dbl>     <dbl>     <dbl>   <dbl>\n1 (Intercept)    99.1      0.0931   1065.    0     \n2 RunnyNoseYes   -0.246    0.110      -2.24  0.0252\n\n\nHere, the model predicts Body Temperature from Runny Nose. Having a runny nose appears to predict a lower body temperature by 0.246 degrees."
  },
  {
    "objectID": "fluanalysis/code/modeleval.html#predictions-from-trained-model-1",
    "href": "fluanalysis/code/modeleval.html#predictions-from-trained-model-1",
    "title": "Flu Analysis Data: Model Evaluation",
    "section": "Predictions from trained model",
    "text": "Predictions from trained model\n\n#create predictions\nflu_augBTRN <- augment(flu_fitBTRN, test_data_flu)\n\n#check RMSE as metric for model performance\nflu_augBTRN %>% \n  rmse(truth = BodyTemp, estimate = .pred)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 rmse    standard        1.30\n\n\nThe RMSE is similar to the all symptoms model with an estimate of 1.299.\n\n#predict from training data\nflu_augRN3 <- augment(flu_fitBTRN, train_data_flu)\n\n#generate RMSE for model performance\nflu_augRN3 %>% \n  rmse(truth = BodyTemp, estimate = .pred)\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  <chr>   <chr>          <dbl>\n1 rmse    standard        1.15\n\n\nUsing the train_data_flu dataset to predict, the RMSE is lower at 1.149. None of these models appear to be productive at predicting body temperature."
  }
]